%-------------------------------------------------------------------------------
\section{\sys API Calls}
%-------------------------------------------------------------------------------
\begin{table*}[t!]
\centering
\begin{tabular}{ c p{.6\linewidth} }
\textbf{API Call} & \textbf{Description} \\
\hline
    \fn{RegisterPrincipal($\pubk{p}$)} & Registers $p$ as a principal whose data can be privately disguised. \\
    \fn{StartDisguise($d$, Option<$p$>)} & Begins the process of applying disguise $d$, optionally 
    on behalf of $p$.\\
    \fn{StartDisguiseReversal($d$, Option<$p$>)} & Begins the process of reversing disguise $d$,
    optionally on behalf of $p$.\\
    \fn{RequestTokenAccess(encSymKeys)} & Sent from \sys to a client authenticated as
    $p$, requesting the client decrypt all the encrypted symmetric keys in \fn{encSymKeys} with
    \privk{p} and uncover the corresponding \symk{pd}s. \\
    \fn{GrantTokenAccess(\{\symk{pd}\})} & Grants \sys permission, for all \symk{pd} in the
    argument, to decrypt any privately-stored \tdata{pd} and \tpriv{pdq} with \symk{pd}.
\end{tabular}
    \vspace{12px}
\caption{API Calls for Client Authenticated as Principal $p$}
\label{tab:api}
\end{table*}

Table~\ref{tab:api} describes all the API calls used in protocols between \sys and a client.
%Table~\ref{tab:func} describes the internal functions run server-side when the protocol occurs.

Figure~\ref{fig:acctreg} illustrates the principal registration protocol: every principal in the
system must register a public key with \sys in order to later reveal (for disguise reversal or
composition) any of privately disguised data. \sys remembers each public key \pubk{p} along with
$p$'s ID.

Figures~\ref{fig:unauthdisapp} and \ref{fig:authdisapp} illustrate the protocols for unauthenticated
and authenticated disguise application respectively. Authenticated and unauthenticated disguise
reversal protocols follow the same logic as disguise application protocols, with the only
differences being the API call invoked by the client (\fn{StartDisguiseReversal($d$)}) and the
function that \sys calls at the end (\fn{ReverseDisguise($d$,tokens)}).
