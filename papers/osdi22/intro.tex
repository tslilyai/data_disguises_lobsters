\section{Introduction}
\label{s:intro}

%% Problem statement
%
Web applications today handle copious personal information, much of it
sensitive, and store it for a long time.
%
For example, booking with a hotel once can cause information like passport
and phone numbers to be compromised by an attacker years
later~\cite{starwood-hack}.
%
%Users' privacy and their rights to exercise control over their data in these
%applications thus are an increasingly important concern for application
%developers.
%
Many developers want to do a good job providing privacy choices to their users,
and legal requirements (\eg the GDPR, CCPA, and others) increasingly mandate
doing so.
%
%Even beyond meeting the legal requirements, many developers are at least
%worried about the reputational damage of a large-scale data leak.
%
But doing a good job at data privacy is hard: it requires extensive manual
implementation work today, and it is easy to get wrong.
%
As a result, application lack desirable privacy features, like \eg ways to
remove or anonymize a user's account, or for old data to ``decay'' into
lower-fidelity, less identifying representations over time.
%

%
%Furthermore, even these efforts are nontrivial, and require careful understanding and manipulation
%of the web application's database. Companies with resources such as FB have implemented internal
%systems that handle e.g., user account deletion (cite DELF); however, solutions like these fail to
%generalize and require time and money that smaller-scale companies may lack.
%

%% Our key idea: data disguising
%
This paper describes \emph{data disguising}, a new systematic framework that
provides developers with abstractions that help them implement correct,
expressive, and end-user-friendly privacy functionality.
%
Data disguises transform a user's data in a web application in
privacy-preserving ways, and thus reduce the damage done when database contents
are exposed to attacker.
%
Crucially, our framework allows the application to maintain key functionality even
when a user has disguised their data, and supports reversible disguises for users
who want to return.
%

%
To understand the need for data disguising, consider the task an application
developer who wishes to implement \ms{... continue here with problem setting.}
%
\ms{add challenges + how we overcome them.}
%
%Beyond simply transforming data, data disguising enables data decay (gradual
%anonymization over time); revealing of disguises (restoration of deleted data
%by the user, while providing strong privacy guarantees when deleted); and
%decorrelation and temporary recorrelation of users with their data for the
%purpose of editing anonymized data, or further disguising it.
%
%Furthermore, data disguising generalizes across web applications, handles the
%technical challenges of securing private data, and integrates with
%applications' database schemas and semantics.
%
To address this, we introduce \emph{pseudoprincipals}, which are first-class anonymous
users that serve as stand-ins for disguised users.
%
An disguised principal typically---depending on the level of security and anonymity
desired---has many pseudoprincipals, up to one for each application data object.
%

%
\sys protects users' data against an attacker who completely compromises the
application server, and thus gains access to the full database contents, the server's
memory, and can act with full administrator privileges in the application.
%
Data disguised prior to compromise remains secure as long as the principal
originally associated with the data does not interact with their disguised
data.
%
Further, \sys's metadata---\eg whose data has been disguised in which way---is
hidden from the attacker under the same assumption.
%


%
\sys, our prototype data disguising library, provides data disguising APIs for
database-backed web applications.
%
For example, \sys helps Lobsters~\cite{lobsters}, a Reddit-like discussion platform,
support GDPR-compliant account deletion and anonymization of old contributions; and it
anyonmizes a homework submission system used by the authors~\cite{websubmit-rs-anon}
after the end of course while preserving students' ability to view and edit their
homework.
%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Motivation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
To motivate data disguising, we consider how HotCRP, a popular application for conference paper and
review management, can improve user privacy.  HotCRP currently retains data from past conferences
indefinitely, and many conferences often enforce single- or double-blind reviews, meaning that no
one but the reviewer should be able to correlate their reviews or paper comments with their
identity. However, HotCRP's stores reviews indefinitely linked to the identity of the reviewer,
leaving reviewers succeptible to unblinding in case of a data breach.

To improve upon HotCRP's provided user privacy, HotCRP implement the follow disguises using \sys:
\begin{enumerate}[nosep]
    \item Per-user GDPR Account Deletion: removing all of a particular user's data such as reviews and papers.
    \item Universal Decorrelation: decorrelating users from
        their authored reviews and papers by (1) generating an
        anonymous user, and (2) relinking the paper or review
        to the newly created anonymous user.
    \item Universal Comment Removal: removing all comments on papers.
\end{enumerate}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Importantly, these disguises place low burden on application developers and end users.
%
When HotCRP disguises a user's data for universal decorrelation or comment removal, HotCRP emails
the user a unique URL that it gets via invoking \sys's API.  When the user
wants to ask for permission to view (or edit, if permitted) the undisguised paper or review, the
user simply has to click the URL link and log into the application. Thus, application of universal
disguises should not require a user to be online in order to gain the capability to apply further
disguises or view their disguised data.

Similarly, when HotCRP disguises a user's data for GDPR deletion, the invoking user receives a URL
that allows the user to reveal the disguise, restoring their account.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{\sys Abstractions}
An application using \sys's API works with the following \sys abstractions:
\begin{itemize}
    \item Application \emph{principals}, which correspond to users of the application,
	and which are uniquely identifiable (\eg via a user ID).
        %
	We denote an application principal as $p \in P$, where $P$ is the set of all application principals.
	%
    \item Application \emph{pseudoprincipals}, which correspond to anonymous users not tied to any natural
    person, and which are uniquely identifiable (\eg via a user ID).
        %
	Pseudoprincipals are part of the set of application principals $p \in P$.
    A pseudoprincipal may or may not be indistinguishable from a real principal: for example, it
        may not have an associated password.
	%
    \item Disguises $d \in D$ %invoked by some principal $p$, which
        that transform the application database.
	%
    \item \emph{Disguise speaks-for tokens}: metadata linking
        disguise-produced pseudoprincipals to real-user principals.
    %
    \item \emph{Disguise diff tokens}: metadata recording the \emph{diff} between pre-disguise and
        post-disguise application state.
    %
    \item \emph{Token decryption capability}: authorizes the holder to access disguise tokens.
        The decryption capability for principal $p$ is a private key \privk{p}.
    %
    \item \emph{Token locator}: locates a subset of disguise tokens belonging to a particular
        principal produced by a particular disguise.
\end{itemize}
Table~\ref{tab:notation} demonstrates how we notate abstractions.

%\begin{table*}[t!]
%\centering
%\begin{tabular}{ c p{.8\linewidth} }
%\textbf{Notation} & \textbf{Description} \\
%\hline
%    \vspace{6pt}
%$p$ & application principals, corresponding to a user ID in the application.\\
%    \vspace{6pt}
%$d$ & disguise invoked by authorized principals that transforms the application database in
%    privacy-preserving ways.\\
%    \vspace{6pt}
%\pubk{p} & public key of $p$. \\
%    \vspace{6pt}
%\privk{p} & private key of $p$, which acts as the decryption capability for $p$'s tokens. \\
%    \vspace{6pt}
%\tdiff{pd} & diff token associated with $p$ produced by disguise $d$. These tokens store data
%    necessary to restore disguised content to its original form.\\
%    \vspace{6pt}
%\town{pd} & speaks-for token associated with $p$ produced by disguise $d$. These tokens store links
%    between $p$ and pseudoprincipals created by decorrelating $p$'s data.\\
%    \vspace{6pt}
%\lcapa{pd} & locator to efficiently find the tokens associated with a principal $p$
%    produced by disguise $d$.\\
%    \vspace{6pt}
%    \end{tabular}
%\caption{Notation used to describe \sys's design.}
%\label{tab:notation}
%\end{table*}


